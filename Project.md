# 프로젝트 기획 - 짤방 저장소 프로젝트

- 작품 카테고리가 존재, 작품 카테고리 하위에 짤방이 생겨남
  - 작품은 계속해서 늘어나는 데이터이므로, Hash Sharding으로 관리
- 짤방을 찾으려 하는 사용자
  - 사용자의 짤방을 찾은 이력, 좋아하는 짤방 등 데이터를 저장
  - 사용자 수는 Dynamic Sharding으로 관리

## 테스트 요소

- 작품 카테고리를 Hash Sharding으로 관리하더라도, 특정 인기 작품의 하위 짤방만 계속 쌓이면, 특정 해시에만 데이터가 많이 쌓일 수 있음 (이 경우 얼마만큼 성능 이슈가 발생하는지 테스트)

## 상세 기획 및 작품구조 기획

- Product
  - productId
  - productType
  - productTitle
  - productReleaseDateType
  - productDirector
- ProductImg
  - productImgId
  - productId
  - productImgType
  - productImgUrl
  - productImgTitle
  - regDate
  - uploadUser
- User
  - userId
  - userName
  - regDate
- UserViewHistory
  - userId
  - historyDate

## 클라에서 필요한 페이지

- [x] 메인 페이지
  - 타이틀, 검색기능, 인기 이미지 등
- [x] 검색 페이지
  - 검색 시 이동 되는 페이지, 이미지 리스트, 작품 리스트를 표시
  - 검색 필터 기능, 검색 카테고리 기능 추가
- [x] 작품 추가/수정 페이지
- [x] 이미지 추가/수정 페이지
- [x] 이미지 상세 페이지
- [x] 로그인 페이지
- [x] 회원가입 페이지

## 샤드DB에 대한 성능 테스트를 위한 준비
1. 특정 데이터 개수 만큼을 넣어놓기
    - 사용자 : 1000
    - 작품 : 1000
    - 작품 당 이미지 : 100
    - 이미지 당 평가 : 500 -> 개수 제한 (데이터가 너무 많아서 insert에 시간이 너무 많이 들어감)
2. 샤드 DB의 동작 확인
    - 샤드 간 테이블 조회 (사용자 별 샤딩을 적용하여, 이미지 조회 시에 샤드간 테이블을 조회하게 됨)
        - 인기 이미지 조회
        - 검색 이미지 조회
    - 샤드 내 테이블 조회
        - 내가 올린 이미지 조회
    - 데이터 추가
        - 이미지 추가
        - 평가 추가
    - 데이터 삭제
        - 이미지 삭제
        - 평가 삭제 
    - 데이터 수정
        - 이미지 내용 수정
        - 평가 점수 수정
    - 특정 샤드에 데이터가 몰리는 경우
        - 특정 사용자의 이미지만 1,000,000개 추가하여 성능 확인하기
    - 여러 사드 간 트랜잭션 유지하기
        - 이미지 삭제로 인하여 한 트랜잭션 안에 모든 사용자의 이미지에 대한 평가가 삭제되어야 하는 경우
    - 샤드가 늘어나는 경우를 상정하여, 샤드 추가하기
        - 데이터를 새로운 샤드에 따라 완전히 새로 등록
    - DB 커넥션을 직접 연결하여 쿼리하는 경우의 성능 파악 (JPA를 사용하지 않을 때)
      - 여러 샤드간 쿼리는 DB 커넥션을 직접 연결하는 방법을 사용해야 하므로, 이 속도를 비교하기 위해서
3. 최종 평가 리포팅
        